<!DOCTYPE html>
  <head>
    <title>OnePlayer Pro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      body {
        background: #131924;
      }

      .content {
        max-width: 500px;
        margin: auto;
        background: white;
        padding: 10px;
      }
    </style>
  </head>
  <body>
    <div class="content">
      <div id="smart-button-container">
        <div style="text-align: center;">
          <div id="paypal-button-container"></div>
        </div>
      </div>
      <!-- <script src="https://www.paypal.com/sdk/js?client-id=ARPymw-zjqWET0Gs9fbQMDc-usfYRRqx43U3S06HgIrYh7d_efHN_iK0EtY6xcqKhQIpXYboHWoq2QoQ&enable-funding=venmo&currency=USD" data-sdk-integration-source="button-factory"></script> -->
      <script src="https://www.paypal.com/sdk/js?client-id=AWVCLLTG-R8Q1p9FOBtTFDspr5exwDzdifSt94v0_UlOHInSHJFZ96JERvbiQYBneEwJeHw_U9_qIGgo&enable-funding=venmo&currency=USD" data-sdk-integration-source="button-factory"></script>
      <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
      <script>
        function generateImage() {
  const paymentDataElement = document.getElementById('paypal-button-container');

// Eliminar el elemento con la clase 'divButtons' del clon
  const divButtonsElement = paymentDataElement.getElementsByClassName('divButtons')[0];
  if (divButtonsElement) {
    divButtonsElement.remove();
  }
          
  html2canvas(paymentDataElement).then(function(canvas) {
    const ctx = canvas.getContext('2d');
    // Crear una nueva imagen para el logotipo
    const logoImg = new Image();
    logoImg.src = 'logo.png'; // Reemplaza 'ruta_del_logotipo.png' con la ruta correcta a tu imagen de logotipo

    // Configurar la fuente del texto
    const font = '20px Arial'; // Reemplaza 'Arial' con el nombre de la fuente que deseas utilizar
    ctx.font = font;

    // Dibujar el texto en el lienzo
    const text = 'Gracias por tu pago'; // Texto que deseas agregar a la imagen
    ctx.fillText(text, 10, 10); // Ajusta las coordenadas según sea necesario

    // Dibujar el logotipo en la esquina superior derecha de la imagen generada
    logoImg.onload = function() {
      ctx.drawImage(logoImg, canvas.width - logoImg.width - 10, 10); // Ajusta las coordenadas según sea necesario
      // Crear un elemento <a> para descargar la imagen con el logotipo
      const link = document.createElement('a');
      link.download = 'comprobante.png';
      link.href = canvas.toDataURL('image/png').replace('image/png', 'image/octet-stream');
      link.click();
    };
  });
}

        function initPayPalButton() {
          paypal.Buttons({
            style: {
              shape: 'rect',
              color: 'gold',
              layout: 'vertical',
              label: 'paypal',
            },
            createOrder: function(data, actions) {
              return actions.order.create({
                purchase_units: [{
                  "amount": {
                    "currency_code": "USD",
                    "value": 5.5
                  }
                }]
              });
            },
            onApprove: function(data, actions) {
  return actions.order.capture().then(function(orderData) {
    const element = document.getElementById('paypal-button-container');
    element.innerHTML = '';

    // Construir el contenido completo
    let content = '<h3>Gracias por tu pago. A continuación se muestran los detalles:</h3>';
    content += '<p><strong>ID de la transacción:</strong> ' + orderData.id + '</p>';
    content += '<p><strong>Monto pagado:</strong> ' + orderData.purchase_units[0].amount.value + ' ' + orderData.purchase_units[0].amount.currency_code + '</p>';
    content += '<p><strong>Correo del comprador:</strong> ' + orderData.payer.email_address + '</p>';
    content += '<p><strong>Hora de la transacción:</strong> ' + orderData.create_time + '</p>';

    // Agregar más información relevante del pago según tus necesidades

    // Agregar el div con la clase 'divButtons'
    content += '<div class="divButtons">';
    content += '<br><br><h3>No olvides enviar el comprobante de pago a nuestro Telegram o correo electrónico.</h3>';
    content += '<br><br><button onclick="window.location.href=\'https://t.me/one1player\'">Telegram</button>';
    content += '<button onclick="window.location.href=\'mailto:liveparaguay2@gmail.com?subject=Comprobante de pago&body=Adjunto mi comprobante de pago\'">Enviar correo</button>';
    content += '<br><br><button onclick="generateImage()">Descargar comprobante</button>';
    content += '</div>';

    // Asignar el contenido al elemento
    element.innerHTML = content;

    // O redirigir a otra URL: actions.redirect('thank_you.html');
  });
},
            onError: function(err) {
              console.log(err);
            }
          }).render('#paypal-button-container');
        }
        initPayPalButton();
      </script>
    </div>
  </body>
</html>
