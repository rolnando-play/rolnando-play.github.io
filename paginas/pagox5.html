<!DOCTYPE html>
  <head>
    <title>OnePlayer Pro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      body {
        background: #131924;
      }

      .content {
        max-width: 500px;
        margin: auto;
        background: white;
        padding: 10px;
      }
    </style>
  </head>
  <body>
    <div class="content">
      <div id="smart-button-container">
        <div style="text-align: center;">
          <div id="paypal-button-container"></div>
        </div>
      </div>
      <!-- <script src="https://www.paypal.com/sdk/js?client-id=ARPymw-zjqWET0Gs9fbQMDc-usfYRRqx43U3S06HgIrYh7d_efHN_iK0EtY6xcqKhQIpXYboHWoq2QoQ&enable-funding=venmo&currency=USD" data-sdk-integration-source="button-factory"></script> -->
      <script src="https://www.paypal.com/sdk/js?client-id=AWVCLLTG-R8Q1p9FOBtTFDspr5exwDzdifSt94v0_UlOHInSHJFZ96JERvbiQYBneEwJeHw_U9_qIGgo&enable-funding=venmo&currency=USD" data-sdk-integration-source="button-factory"></script>
      <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
      <script>
        function generateImage() {
  // Capturar la página sin el logotipo
  html2canvas(document.body).then(function(canvas) {
    const ctx = canvas.getContext('2d');

    // Crear una nueva imagen para el logotipo
    const logoImg = new Image();
    logoImg.src = 'logo.png'; // Reemplaza 'ruta_del_logotipo.png' con la ruta correcta a tu imagen de logotipo

// Configurar la fuente del texto
    const font = '20px Arial'; // Reemplaza 'Arial' con el nombre de la fuente que deseas utilizar
    ctx.font = font;

// Dibujar el texto en el lienzo
    const text = 'Gracias por tu pago'; // Texto que deseas agregar a la imagen
    ctx.fillText(text, 10, 10); // Ajusta las coordenadas según sea necesario
    
    // Dibujar el logotipo en la esquina superior derecha de la imagen generada
    logoImg.onload = function() {
      ctx.drawImage(logoImg, canvas.width - logoImg.width - 10, 10); // Ajusta las coordenadas según sea necesario
      // Crear un elemento <a> para descargar la imagen con el logotipo
      const link = document.createElement('a');
      link.download = 'comprobante.png';
      link.href = canvas.toDataURL('image/png').replace('image/png', 'image/octet-stream');
      link.click();
    };
  });
}



        function initPayPalButton() {
          paypal.Buttons({
            style: {
              shape: 'rect',
              color: 'gold',
              layout: 'vertical',
              label: 'paypal',
            },
            createOrder: function(data, actions) {
              return actions.order.create({
                purchase_units: [{
                  "amount": {
                    "currency_code": "USD",
                    "value": 5.5
                  }
                }]
              });
            },
            onApprove: function(data, actions) {
              return actions.order.capture().then(function(orderData) {
                // Mostrar los datos del pago de forma comprensible
                const element = document.getElementById('paypal-button-container');
                element.innerHTML = '';
                element.innerHTML = ' < h3 > Gracias por tu pago.A continuación se muestran los detalles: < /h3>';
                // Mostrar información relevante del pago
                element.innerHTML += ' < p >< strong > ID de la transacción: < /strong> ' + orderData.id + ' < /p>';
                element.innerHTML += ' < p >< strong > Monto pagado: < /strong> ' + orderData.purchase_units[0].amount.value + ' ' + orderData.purchase_units[0].amount.currency_code + ' < /p>';
                element.innerHTML += ' < p >< strong > Correo del comprador: < /strong> ' + orderData.payer.email_address + ' < /p>';
                element.innerHTML += ' < p >< strong > Hora de la transacción: < /strong> ' + orderData.create_time + ' < /p>';
                // Agrega más información relevante del pago según tus necesidades
                // Mostrar el mensaje de éxito
                element.innerHTML += ' < br >< br >< h3 > No olvides enviar el comprobante de pago a nuestro Telegram o correo electrónico. < /h3>';
                element.innerHTML += ' < br >< br >< button onclick = "window.location.href=\'https://t.me/one1player\'" > Telegram < /button>';
                element.innerHTML += ' < button onclick = "window.location.href=\'mailto:liveparaguay2@gmail.com?subject=Comprobante de pago&body=Adjunto mi comprobante de pago\'" > Enviar correo < /button>';
                element.innerHTML += ' < br > < br > < button onclick = "generateImage()" > Descargar comprobante < /button>';
                // O redirigir a otra URL: actions.redirect('thank_you.html');
              });
            },
            /*onApprove: function(data, actions) {
              return actions.order.capture().then(function(orderData) {
                // Full available details
                console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
                // Show a success message within this page, e.g.
                const element = document.getElementById('paypal-button-container');
                element.innerHTML = '';
                element.innerHTML = ' < h3 > Gracias por tu pago, envía el comprobante de pago que recibiste en tu correo a nuestro Telegram o correo! < br >< br > ESTO NO ES UN COMPROBANTE DE PAGO < /h3>< br >< br >< h2 > NO ENVIAR CAPTURA DE ESTE MENSAJE < br > NO ENVIAR CAPTURAS DE LA TRANSACCIÓN DEL BANCO, SOLO LA DE PAYPAL < /h2>';
                // Or go to another URL: actions.redirect('thank_you.html');
                // Print the invoice
                
              });
            },*/
            onError: function(err) {
              console.log(err);
            }
          }).render('#paypal-button-container');
        }
        initPayPalButton();
      </script>
    </div>
  </body>
</html>
